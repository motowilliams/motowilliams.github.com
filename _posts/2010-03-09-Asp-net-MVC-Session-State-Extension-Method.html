---
layout: post
image_root: "/assets/images/"
title: "Asp net MVC Session State Extension Method"
author: "Eric Williams"
categories: [Asp.Net MVC, Extension Methods]
---

<p>There are a few implementations of the conical wizard out there using Asp.net MVC.&nbsp; <a href="http://www.sessions.com/" target="_blank"><img class="imagefloatright" title="Sessions" src="{{page.image_root}}Sessions.png" alt="Sessions" width="189" height="160"></a>I'm working on a project where we are needing one such wizard and we're trying out using session state, not session skate, to keep the models that make up the larger data set persisted for the user until the final submission.</p>
<p>This will allow the user to go back to any of the stages and edit the information if needed.&nbsp; There are are options but for now we're testing driving this approach.</p>
<p>Inspired (<em>dang near a complete duplicate</em>) by <a href="http://blog.donnfelker.com/2010/02/25/asp-net-mvc-tempdata-extension-methods/" target="_blank">Donn Felker's <strong>ASP.NET MVC TempData Extension Methods</strong></a> I created one that uses <a href="http://msdn.microsoft.com/en-us/library/system.web.httpsessionstatebase.aspx" target="_blank">HttpSessionStateBase</a>.</p>

{% highlight c# %}
public static class SessionStateExtensions
{
    public static void Put<T>(this HttpSessionStateBase httpSession, T value) where T : class
    {
        httpSession[typeof (T).FullName] = value;
    }
 
    public static void Put<T>(this HttpSessionStateBase httpSession, string key, T value) where T : class
    {
        httpSession[typeof (T).FullName + key] = value;
    }
 
    public static T Get<T>(this HttpSessionStateBase httpSession) where T : class
    {
        var o = (T) httpSession[typeof (T).FullName];
        return o == null ? null : o;
    }
 
    public static T Get<T>(this HttpSessionStateBase httpSession, string key) where T : class
    {
        var o = (T) httpSession[typeof (T).FullName + key];
        return o == null ? null : o;
    }
}
{% endhighlight %}